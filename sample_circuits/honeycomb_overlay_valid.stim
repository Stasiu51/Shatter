###############################################################################
# Honeycomb (valid) with Shatter overlay directives (##!) and Crumble pragmas.
#
# This file demonstrates most of the overlay syntax described in AGENTS.md.
# It remains valid .stim because all extensions are in comments and paired
# with Crumble's #!pragma lines where applicable.
###############################################################################

# -- Sets ---------------------------------------------------------------------
##! SET NAME=@hex VALUE=0..5
##! SET NAME=@edge VALUE=0..3

# -- Layers -------------------------------------------------------------------
##! LAYER NAME=UPPER Z=2
##! LAYER NAME=MIDDLE Z=1
##! LAYER NAME=LOWER Z=0

# -- Embedding ----------------------------------------------------------------
##! EMBEDDING TYPE=TORUS LX=12 LY=12

# Base honeycomb coords and qubit ids (tiny subset for fixture purposes).
QUBIT_COORDS(0, 0) 0
QUBIT_COORDS(1, 0) 1
QUBIT_COORDS(2, 0) 2
QUBIT_COORDS(0, 1) 3
QUBIT_COORDS(1, 1) 4
QUBIT_COORDS(2, 1) 5
QUBIT_COORDS(0, 2) 6
QUBIT_COORDS(1, 2) 7
QUBIT_COORDS(2, 2) 8

# -- Bulk layout ---------------------------------------------------------------
##! LAYOUT Q=@hex LAYER=UPPER MAP=HEX SPACING=80 ORIGIN=(100,100)
##! LAYOUT Q=0..8 LAYER=LOWER MAP=GRID DX=80 DY=80 ORIGIN=(100,100)
##! LAYOUT Q=0..2 LAYER=MIDDLE MAP=LINE START=(100,260) END=(260,260)

# -- Per-qubit overrides ------------------------------------------------------
##! QUBIT Q=2 X=260 Y=140 LAYER=UPPER COLOUR=#3366FF TEXT="q2" MOUSEOVER="T1=22Âµs"
##! QUBIT Q=4 X=180 Y=180 LAYER=MIDDLE COLOUR=#AA6633 TEXT="q4"

# -- Connections ---------------------------------------------------------------
##! CONN SET EDGES=(0-1, 1-2) LAYER=UPPER DROOP=0.15 COLOUR=#00AA88 TEXT="chain-0-2"
##! CONN SET EDGES=(3-4, 4-5) LAYER=MIDDLE DROOP=0.00 COLOUR=#888888 TEXT="chain-3-5"
##! CONN REMOVE EDGES=(3-4) LAYER=MIDDLE

# -- Polygon styles and instances --------------------------------------------
##! POLY STYLE NAME=CELL COLOUR=#88C0D0
##! POLY STYLE NAME=FAULT COLOUR=#FFCCCC
##! POLY LAYER=UPPER STYLE=CELL TEXT="tile-A"  
#!pragma POLYGON(0,0.5,1,0.2) 0 1 4 3
##! POLY LAYER=LOWER STYLE=FAULT TEXT="tile-B"
#!pragma POLYGON(1,0.2,0,0.3) 5 4 7 8

# -- Highlights ---------------------------------------------------------------
##! HIGHLIGHT STYLE NAME=ACTIVE COLOUR=#FF5555 OPACITY=0.88
##! HIGHLIGHT STYLE NAME=PATH COLOUR=#55AAFF OPACITY=0.5
##! HIGHLIGHT QUBITS=3,4 STYLE=ACTIVE TEXT="hot"
##! HIGHLIGHT EDGES=(0-1,1-2) STYLE=PATH MOUSEOVER="syndrome path"
##! HIGHLIGHT GATES=10,11 STYLE=ACTIVE

# -- User marks and error regions (paired with pragmas) -----------------------
##! MARK STYLE=HOT TEXT="X-check A"
#!pragma MARK(0) 0 1
##! MARK STYLE=HOT TEXT="Z-check B"
#!pragma MARK(1) 3 4

##! ERR STYLE=BAD
#!pragma ERR 2 5

# -- Circuit body -------------------------------------------------------------
TICK
H 0 1 2 3 4 5 6 7 8
TICK
CX 0 1
CX 1 2
TICK
M 0 1 2 3 4 5 6 7 8
